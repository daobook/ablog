
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Automate GitHub Pages Deploys &#8212; ABlog</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/ablog.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Cross-referencing Blog Pages" href="cross-referencing-blog-pages.html" />
    <link rel="prev" title="ABlog API" href="api.html" /> 
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="ABlog"
/>
 
<link
  rel="stylesheet"
  href="../_static/css/font-awesome.css"
  type="text/css"
/>

<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="automate-github-pages-deploys">
<h1>Automate GitHub Pages Deploys<a class="headerlink" href="#automate-github-pages-deploys" title="永久链接至标题">¶</a></h1>
<p>If being away from your personal computer is holding you back from blogging, keep reading.
This post will show you how to automate builds and deploys using Travis CI.
Once you set this up, all you need to do post an article will be pushing to GitHub or creating a new file on <a class="reference external" href="https://github.com">GitHub.com</a> from any computer!</p>
<p>For this to work, you need to be hosting your website on GitHub pages.
If you are not already doing so, see <a class="reference internal" href="deploy-to-github-pages.html#deploy-to-github-pages"><span class="std std-ref">部署到 GitHub Pages</span></a>.</p>
<section id="sign-up-for-travis-ci">
<h2>Sign up for Travis CI<a class="headerlink" href="#sign-up-for-travis-ci" title="永久链接至标题">¶</a></h2>
<p>Travis CI is a continuous integration service used to build and test projects hosted at GitHub.
You can easily sync your GitHub projects with Travis CI signing up for Travis CI using your GitHub account:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/TravisCI_login.png"><img alt="../_images/TravisCI_login.png" src="../_images/TravisCI_login.png" style="width: 521.6px; height: 300.0px;" /></a>
</figure>
<p>Once you login, go to <span class="guilabel">Accounts</span> page and flick the switch on for your source repository for GitHub pages.
In the below example, <strong>website</strong> is the source repository and <em>sunpy.github.io</em> contains HTML output from builds:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/TravisCI_accounts.png"><img alt="../_images/TravisCI_accounts.png" src="../_images/TravisCI_accounts.png" style="width: 663.2px; height: 320.0px;" /></a>
</figure>
</section>
<section id="deploy-key-setup">
<h2>Deploy key setup<a class="headerlink" href="#deploy-key-setup" title="永久链接至标题">¶</a></h2>
<p>To have builds pushed from Travis CI to GitHub, you will need a <em>personal access token</em>.
Go to GitHub <span class="menuselection">Settings ‣ Personal access tokens</span> page to generate a new token.
You need only <em>public repo</em> access checked for this purpose:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/GitHub_token.png"><img alt="../_images/GitHub_token.png" src="../_images/GitHub_token.png" style="width: 631.2px; height: 373.6px;" /></a>
</figure>
<p>Then, you need to set this access token as an environment variable, e.g. <code class="docutils literal notranslate"><span class="pre">DEPLOY_KEY</span></code>, under <span class="menuselection">Settings ‣ Environment Variables</span>.
Keep the <span class="guilabel">Display value in build logs switch off</span>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/TravisCI_settings.png"><img alt="../_images/TravisCI_settings.png" src="../_images/TravisCI_settings.png" style="width: 510.40000000000003px; height: 300.0px;" /></a>
</figure>
<p>Also, do not forget to flick <span class="guilabel">Build pushes</span> on under <span class="menuselection">Settings ‣ General Settings</span>:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/TravisCI_global.png"><img alt="../_images/TravisCI_global.png" src="../_images/TravisCI_global.png" style="width: 519.35px; height: 301.6px;" /></a>
</figure>
</section>
<section id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="永久链接至标题">¶</a></h2>
<p>Finally, you need a <code class="file docutils literal notranslate"><span class="pre">.travis.yml</span></code> in your project that looks like the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>

<span class="nt">python</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">2.7</span>

<span class="nt">virtualenv</span><span class="p">:</span>
    <span class="nt">system_site_packages</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">before_install</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pip install ablog</span>

<span class="nt">script</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ablog build</span>

<span class="nt">after_success</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">git config --global user.name &quot;Your Name&quot;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">git config --global user.email &quot;yourname@domain.com&quot;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">git config --global push.default simple</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ablog deploy --push-quietly --github-token=DEPLOY_KEY -m=&quot;`git log -1 --pretty=%B`&quot;</span>
</pre></div>
</div>
<p>The main part of the process, that is building of the website, is under <code class="docutils literal notranslate"><span class="pre">script</span></code> block.
If you repository has dependencies to other Python packages, you can install them in <code class="docutils literal notranslate"><span class="pre">before_install</span></code> block.</p>
<p>Upon a successful built, your website is deployed.
Note that there is no mention of your GitHub Pages repository, i.e. <code class="docutils literal notranslate"><span class="pre">username.github.io</span></code>.
That is specified in <code class="file docutils literal notranslate"><span class="pre">conf.py</span></code> file with <a class="reference internal" href="ablog-configuration-options.html#confval-github_pages"><code class="xref std std-confval docutils literal notranslate"><span class="pre">github_pages</span></code></a>.
See <a class="reference internal" href="deploy-to-github-pages.html#deploy-to-github-pages"><span class="std std-ref">部署到 GitHub Pages</span></a> and <a class="reference internal" href="ablog-commands.html#commands"><span class="std std-ref">ABlog 命令</span></a> to find out more about deploy options.</p>
<p>Finally, you can find out more about <code class="file docutils literal notranslate"><span class="pre">.travis.yml</span></code> file and customizing your built on Travis CI <a class="reference external" href="https://docs.travis-ci.com/user/customizing-the-build/">user documentation</a>.</p>
</section>
</section>

<div class="section">
     
<div class="section">
  <span style="float: left">
     
    <a href="../release/ablog-v0.7-released.html#ablog-v0-7-2-released">
      <i class="fa fa-arrow-circle-left"></i> ABlog v0.7.2 released
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     
    <a href="../release/ablog-v0.7-released.html#ablog-v0-7-3-released">
      ABlog v0.7.3 released <i
        class="fa fa-arrow-circle-right"
      ></i
      >
    </a>
    
  </span>
</div>
  
  <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = "ablogforsphinx";
      var disqus_identifier = "/manual/auto-github-pages-deploys/";
      var disqus_title = "Automate GitHub Pages Deploys";
      var disqus_url = "https://ablog.readthedocs.org/manual/auto-github-pages-deploys";

      (function () {
        var dsq = document.createElement("script");
        dsq.type = "text/javascript";
        dsq.async = true;
        dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (
          document.getElementsByTagName("head")[0] ||
          document.getElementsByTagName("body")[0]
        ).appendChild(dsq);
      })();
    </script>
    <noscript
      >Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript"
        >comments powered by Disqus.</a
      ></noscript
    >
    <a href="https://disqus.com" class="dsq-brlink"
      >comments powered by <span class="logo-disqus">Disqus</span></a
    >
  </div>
  
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/ablog.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">ABlog for blogging with Sphinx</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=sunpy&repo=ablog&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





  
<h2>
   <i class="fa fa-calendar"></i>
  15 June 2015 
</h2>

<ul>
   
<li id="author">
  <span
    ><i class="fa-fw fa fa-user"></i></span
  >
   
  <a href="../blog/author/ahmet-bakan.html">Ahmet Bakan</a>  
</li>
 
<li id="location">
  <span
    ><i class="fa-fw fa fa-location-arrow"></i></span
  >
   
  <a href="../blog/location/san-francisco-ca.html">San Francisco, CA</a>  
</li>
 
<li id="language">
  <span
    ><i class="fa-fw fa fa-language"></i></span
  >
   
  <a href="../blog/language/english.html">English</a>  
</li>
 
<li id="category">
  <span
    ><i class="fa-fw fa fa-folder-open"></i></span
  >
   
  <a href="../blog/category/manual.html">Manual</a>  
</li>
 
<li id="tags">
  <span
    ><i class="fa-fw fa fa-tags"></i> </span
  >
   
  <a href="../blog/tag/deploy.html">deploy</a>   
  <a href="../blog/tag/tips.html">tips</a>  
</li>
 
<li id="comments">
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = "ablogforsphinx"; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
      var s = document.createElement("script");
      s.async = true;
      s.type = "text/javascript";
      s.src = "//" + disqus_shortname + ".disqus.com/count.js";
      (
        document.getElementsByTagName("HEAD")[0] ||
        document.getElementsByTagName("BODY")[0]
      ).appendChild(s);
    })();
  </script>
  <i class="fa-fw fa fa-comments"></i>
  <a
    href="#disqus_thread"
    data-disqus-identifier="/manual/auto-github-pages-deploys/"
  >
    </a
  >
</li>

</ul>

<h3>
  <a href="../blog.html">最近文章</a>
</h3>
<ul>
   
  <li>
    <a href="../release/ablog-v0.10-released.html#ablog-v0-10-20-released"
      >13 October - ABlog v0.10.20 released</a
    >
  </li>
  
  <li>
    <a href="../release/ablog-v0.10-released.html#ablog-v0-10-19-released"
      >26 May - ABlog v0.10.19 released</a
    >
  </li>
  
  <li>
    <a href="../release/ablog-v0.10-released.html#ablog-v0-10-18-released"
      >26 April - ABlog v0.10.18 released</a
    >
  </li>
  
  <li>
    <a href="../release/ablog-v0.10-released.html#ablog-v0-10-17-released"
      >24 March - ABlog v0.10.17 released</a
    >
  </li>
  
  <li>
    <a href="../release/ablog-v0.10-released.html#ablog-v0-10-16-released"
      >23 March - ABlog v0.10.16 released</a
    >
  </li>
  
</ul>

<h3><a href="../blog/tag.html">标签</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../blog/tag/sphinx.html">Sphinx</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../blog/tag/api.html">api</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../blog/tag/commands.html">commands</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-2">
    <a href="../blog/tag/config.html">config</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../blog/tag/deploy.html">deploy</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-2">
    <a href="../blog/tag/directive.html">directive</a>
  </li>
      
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../blog/tag/i18n.html">i18n</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="../blog/tag/posting.html">posting</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-4">
    <a href="../blog/tag/tips.html">tips</a>
  </li>
   
</ul>

<h3>
  <a href="../blog/category.html">类别</a>
</h3>
<ul>
   
  <li>
    <a href="../blog/category/manual.html">Manual (19)</a>
  </li>
    
  <li>
    <a href="../blog/category/release.html">Release (58)</a>
  </li>
   
</ul>

<h3>
  <a href="../blog/archive.html">归档</a>
</h3>
<ul>
   
  <li>
    <a href="../blog/2021.html">2021 (8)</a>
  </li>
    
  <li>
    <a href="../blog/2020.html">2020 (12)</a>
  </li>
    
  <li>
    <a href="../blog/2019.html">2019 (4)</a>
  </li>
    
  <li>
    <a href="../blog/2018.html">2018 (11)</a>
  </li>
    
  <li>
    <a href="../blog/2016.html">2016 (2)</a>
  </li>
    
  <li>
    <a href="../blog/2015.html">2015 (26)</a>
  </li>
    
  <li>
    <a href="../blog/2014.html">2014 (14)</a>
  </li>
   
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2021, ABlog Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/manual/auto-github-pages-deploys.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>